<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    th:with="title=${modeleCourrierForm == null ? #{admin.modele.courrier.create} : #{admin.modele.courrier.modify($modeleCourrierForm.modeleName)}}"
    th:replace="~{layouts/layout  :: layout (template=~{::main},templateClass='', description='Page de création de modèle de courrier',
    title=${title} )}"
>
    <main role="main" class="page-layout__content" id="main_content">
        <div class="row-actions">
            <div class="row-actions__left">
                <button
                    type="button"
                    class="base-btn base-btn--button base-btn--default base-btn--light base-btn--transparent base-btn--center base-btn--bordered m-b-6"
                    th:text="#{button.label.back}"
                    onclick="goModeleCourrierList()"
                ></button>
            </div>
            <div class="row-actions__right">
                <button
                    type="button"
                    class="base-btn base-btn--submit base-btn--default base-btn--center m-b-6"
                    th:text="#{button.label.save}"
                    th:onclick="|createOrModifyModeleCourrier(event, ${modeleCourrierForm != null ? false : true})|"
                ></button>
            </div>
        </div>
        <h1
            th:if="${modeleCourrierForm == null}"
            class="m-t-6 m-b-6 p-b-3 base-title base-title--lvl-1 base-title--is-underlined"
            th:text="#{admin.modele.courrier.create}"
        >
            Création d'un modèle de courrier
        </h1>
        <h1
            th:if="${modeleCourrierForm != null}"
            class="m-t-6 m-b-6 p-b-3 base-title base-title--lvl-1 base-title--is-underlined"
            th:text="#{admin.modele.courrier.modify(${modeleCourrierForm.modeleName})}"
        >
            Modification du modèle de courrier
        </h1>

        <form id="modele-courrier-form" th:data-id="${modeleCourrierForm ? modeleCourrierForm.id : null}">
            <div class="form-input m-b-6">
                <div class="form-input__header">
                    <div class="form-input__header-top">
                        <label aria-disabled="false" for="modeleName" id="modeleName_label" class="form-label">
                            <span th:text="#{admin.modele.courrier.name}">Nom du modèle</span>
                            <span class="form-label__required-text" th:text="#{form.input.required}">(requis)</span>
                        </label>
                        <div class="form-input__icon-group"></div>
                    </div>
                </div>
                <div class="form-input__container">
                    <input
                        type="text"
                        name="modeleName"
                        id="modeleName"
                        class="form-input__field form-input__field--type-text"
                        data-validation="required"
                        th:value="${modeleCourrierForm ? modeleCourrierForm.modeleName : null}"
                    />
                </div>
                <div id="modeleName_description" class="form-input__footer"></div>
            </div>

            <div class="form-input m-b-6">
                <p class="form-label">
                    [[#{admin.modele.courrier.file}]]
                    <span class="form-label__required-text" th:text="#{form.input.required}">(requis)</span>
                </p>
                <th:block
                    th:replace="fragments/components/formblocks/file-input :: fileInput('admin.modele.courrier.file.label', 'modeleFile', 'modeleFile', false, ${acceptedType}, false)"
                >
                </th:block>
            </div>
            <div class="form-input m-b-6" th:if="${modeleCourrierForm != null}">
                <span th:text="#{admin.modele.courrier.file.now}">Fichier actuel :</span>
                <a class="link" th:href="@{|/${modeleCourrierForm.piecesJointes.link}|}">
                    <span aria-hidden="true" class="icon icon--download link__icon link__icon--prepend"></span>
                    [[|${modeleCourrierForm.piecesJointes.nom}|]][[|${modeleCourrierForm.piecesJointes.extension}|]]
                </a>
            </div>
            <div class="form-input m-b-6">
                <div
                    th:replace="fragments/components/formblocks/autocomplete-select :: autocompleteSelect(
                    'admin.modele.courrier.communications',
                    'typesCommunication',
                    'typesCommunication',
                    'admin.modele.courrier.communications.label',
                    ${evenementTypes},
                    ${modeleCourrierForm ? modeleCourrierForm.typesCommunication : {}},
                    false,
                    false,
                    '0',
                    'input',
                    '',
                    '',
                    true,
                    true,
                    false)"
                ></div>
            </div>
        </form>
        <div class="row-actions">
            <div class="row-actions__left">
                <button
                    type="button"
                    class="base-btn base-btn--button base-btn--default base-btn--light base-btn--transparent base-btn--center base-btn--bordered m-b-6"
                    th:text="#{button.label.back}"
                    onclick="goModeleCourrierList()"
                ></button>
            </div>
            <div class="row-actions__right">
                <button
                    type="button"
                    class="base-btn base-btn--submit base-btn--default base-btn--center m-b-6"
                    th:text="#{button.label.save}"
                    th:onclick="|createOrModifyModeleCourrier(event, ${modeleCourrierForm != null ? false : true})|"
                ></button>
            </div>
        </div>
    </main>
</html>
