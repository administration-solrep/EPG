<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layouts/layout::layout (template=~{::main},templateClass='', description='Page pour importer le  nouveau gouvernement', title=#{gouvernement.import.preview.title})}"
>
    <main role="main" id="main_content" class="page-layout__content">
        <div id="importGouv">
            <input type="hidden" id="urlPreviousPage" name="urlPreviousPage" th:value="@{${urlPreviousPage}}" />
            <div class="m-t-6 m-b-6 flex flex-row justify-between">
                <button
                    type="button"
                    onClick="goPreviousPage()"
                    class="base-btn base-btn--button base-btn--default base-btn--light base-btn--transparent base-btn--bordered"
                    th:text="#{button.label.cancel}"
                >
                    Annuler
                </button>
                <div
                    th:replace="fragments/components/label-action-button-fixed :: label-action-button-fixed(${action}, false, '')"
                ></div>
            </div>
            <h1
                class="base-title base-title--lvl-1 p-b-3 m-b-6 base-title--is-underlined"
                th:text="#{gouvernement.import.preview.title.inject}"
            >
                Injection de nouveau gouvernement
            </h1>
            <h2 class="base-title base-title--lvl-3" th:text="#{gouvernement.import.preview.title.add}">
                Ajout d'un nouveau gouvernement
            </h2>
            <input type="hidden" id="urlPreviousPage" name="urlPreviousPage" th:value="@{${urlPreviousPage}}" />
            <div class="form-input">
                <div class="form-input__container table-wrapper">
                    <table class="custom-table">
                        <caption class="sr-only" th:text="#{gouvernement.import.date.table.caption}">
                            Date d'import du gouvernement
                        </caption>
                        <thead class="table-header custom-table__header">
                            <tr class="table-header__line">
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.nomGouv}"
                                        >Nom du gouvernement</span
                                    >
                                </th>
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.dateGouv}"
                                        >Date de début du gouvernement</span
                                    >
                                </th>
                            </tr>
                        </thead>
                        <tbody class="custom-table__body">
                            <th:block th:unless="${#lists.isEmpty(injections)}">
                                <tr class="custom-table__table-line table-line">
                                    <td class="table-line__cell">
                                        <p class="table-line__cell-content" th:text="${injections[0].libelleLong}"></p>
                                    </td>
                                    <td class="table-line__cell">
                                        <p
                                            class="table-line__cell-content"
                                            th:text="${#dates.format(injections[0].dateDeDebut, 'dd/MM/yyyy')}"
                                        ></p>
                                    </td>
                                </tr>
                            </th:block>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="flexible-table">
                <div class="table-wrapper">
                    <table class="custom-table">
                        <caption class="sr-only" th:text="#{gouvernement.import.edit.table.caption}">
                            Import d'un gouvernement - modification
                        </caption>
                        <thead class="table-header custom-table__header">
                            <tr class="table-header__line">
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.organigrammeModifie}"
                                        >Organigramme modifié</span
                                    >
                                </th>
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.typeModification}"
                                        >Type de modification</span
                                    >
                                </th>
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.ministere}"
                                        >Ministère</span
                                    >
                                </th>
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.mandat}"
                                        >Mandat</span
                                    >
                                </th>
                                <th scope="col" class="table-header__cell">
                                    <span
                                        class="table-header__cell-inner"
                                        th:text="#{gouvernement.import.preview.inject.identite}"
                                        >Identité</span
                                    >
                                </th>
                            </tr>
                        </thead>
                        <tbody class="custom-table__body">
                            <th:block th:unless="${#lists.isEmpty(injections)}">
                                <tr
                                    class="custom-table__table-line table-line"
                                    th:each="i: ${#numbers.sequence(1, injections.size-1)}"
                                >
                                    <td class="table-line__cell">
                                        <th:block th:if="${injectionsOld[i] != null}">
                                            <th:block
                                                th:replace="fragments/admin/organigramme/organigramme-cell-format :: organigramme-cell-format(${injectionsOld[i]})"
                                            ></th:block>
                                        </th:block>
                                    </td>
                                    <td class="table-line__cell">
                                        <th:block th:if="${modifications[i] != null}">
                                            <p class="table-line__cell-content" th:text="${modifications[i]}"></p>
                                        </th:block>
                                    </td>
                                    <td class="table-line__cell">
                                        <th:block th:if="${injectionsNew[i] != null}">
                                            <th:block
                                                th:replace="fragments/admin/organigramme/organigramme-cell-format :: organigramme-cell-format(${injectionsNew[i]})"
                                            ></th:block>
                                        </th:block>
                                    </td>
                                    <td class="table-line__cell">
                                        <th:block th:if="${injectionsNew[i] != null}">
                                            <p
                                                class="table-line__cell-content"
                                                th:text="${injectionsNew[i].libelleLong}"
                                            ></p>
                                            <p
                                                class="table-line__cell-content"
                                                th:text="#{gouvernement.import.epp.label.mandat}"
                                            ></p>
                                            <p
                                                class="table-line__cell-content"
                                                th:text="${#dates.format(injectionsNew[i].dateDeDebut, 'dd/MM/yyyy')}"
                                            ></p>
                                        </th:block>
                                    </td>
                                    <td class="table-line__cell">
                                        <th:block th:if="${injectionsNew[i] != null}">
                                            <p
                                                class="table-line__cell-content"
                                                th:text="${injectionsNew[i].civilite}"
                                            ></p>
                                            <p
                                                class="table-line__cell-content"
                                                th:text="${injectionsNew[i].prenomNom}"
                                            ></p>
                                            <p
                                                class="table-line__cell-content"
                                                th:text="${#dates.format(injectionsNew[i].dateDeDebut, 'dd/MM/yyyy')}"
                                            ></p>
                                        </th:block>
                                    </td>
                                </tr>
                            </th:block>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="m-t-6 m-b-6 flex flex-row justify-between">
                <button
                    type="button"
                    onClick="goPreviousPage()"
                    class="base-btn base-btn--button base-btn--default base-btn--light base-btn--transparent base-btn--bordered"
                    th:text="#{button.label.cancel}"
                >
                    Annuler
                </button>
                <div
                    th:replace="fragments/components/label-action-button-fixed :: label-action-button-fixed(${action}, false, '')"
                ></div>
            </div>
        </div>
    </main>
</html>
