<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <div th:fragment="modal-choix-poste" id="modal-choix-poste" class="interstitial-overlay__content">
            <div
                class="interstitial"
                role="dialog"
                aria-labelledby="dialogTitle-choixPoste"
                style="position: relative;"
            >
                <div class="interstitial__header">
                    <h1
                        id="dialogTitle-modal-choix-poste"
                        class="interstitial__title"
                        th:text="#{epg.dossier.creation.modale.choix.poste.title}"
                    ></h1>

                    <button
                        type="button"
                        class="interstitial__close base-btn base-btn--button base-btn--default base-btn--discret"
                    >
                        <span aria-hidden="true" class="icon icon--cross"></span
                        ><span class="sr-only" th:text="#{modal.close}"></span>
                    </button>
                </div>

                <div class="interstitial__content">
                    <fieldset class="form-input__fieldset">
                        <div class="form-input-group__list">
                            <!-- Poste -->
                            <div class="form-choice-input-fields" id="poste-div">
                                <input
                                    type="radio"
                                    id="rbt-poste"
                                    name="poste"
                                    class="form-choice-input__input"
                                    onchange="enablePoste()"
                                    autocomplete="off"
                                    checked
                                />
                                <label
                                    for="rbt-poste"
                                    class="form-choice-input__label form-choice-input__label--radio form-choice-input__label--empty"
                                >
                                    <span
                                        class="sr-only"
                                        th:text="#{epg.dossier.creation.entite.origine.direction.concernee}"
                                    >
                                        Entité d’origine et direction concernée
                                    </span>
                                </label>
                                <fieldset class="form-choice-input-fields__fieldset">
                                    <legend class="sr-only" th:text="#{epg.dossier.creation.modale.poste.title}">
                                        Poste
                                    </legend>
                                    <div class="form-choice-input-fields__fields">
                                        <div class="form-select full-width">
                                            <th:block
                                                th:replace="fragments/components/organigrammeSelectAutocomplete ::organigrammeSelectAutocomplete(
                                                    'epg.dossier.creation.modale.poste.title',
                                                    true,
                                                    'poste',
                                                    'poste',
                                                    'PST',
                                                    '',
                                                    false,
                                                    false,
                                                    null,
                                                    false)"
                                            ></th:block>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <!-- Poste par défaut -->
                            <div class="form-choice-input-fields" id="poste-defaut-div" disabled>
                                <input
                                    type="radio"
                                    id="rbt-poste-defaut"
                                    name="poste"
                                    class="form-choice-input__input"
                                    onchange="enablePoste(false)"
                                    autocomplete="off"
                                />
                                <label
                                    for="rbt-poste-defaut"
                                    class="form-choice-input__label form-choice-input__label--radio form-choice-input__label--empty"
                                >
                                    <span class="sr-only" th:text="#{epg.dossier.creation.modale.poste.defaut.title}">
                                        Poste par défaut
                                    </span>
                                </label>
                                <fieldset class="form-choice-input-fields__fieldset">
                                    <legend class="sr-only" th:text="#{epg.dossier.creation.modale.poste.defaut.title}">
                                        Poste par défaut
                                    </legend>
                                    <div class="form-choice-input-fields__fields">
                                        <div class="form-select form-select--simple full-width">
                                            <div class="form-input">
                                                <div class="form-input__header">
                                                    <div class="form-input__header-top">
                                                        <label
                                                            for="poste-defaut"
                                                            id="poste-defaut-label"
                                                            class="form-label"
                                                        >
                                                            [[#{epg.dossier.creation.modale.poste.defaut.title}]]
                                                            <span
                                                                class="form-label__required-text"
                                                                th:text="#{form.input.required}"
                                                            >
                                                                (requis)
                                                            </span>
                                                        </label>
                                                        <div class="form-input__icon-group"></div>
                                                    </div>
                                                </div>
                                                <div class="form-input__container">
                                                    <div class="form-select__field-wrapper">
                                                        <div class="form-select-input">
                                                            <select
                                                                th:name="poste-defaut"
                                                                th:id="poste-defaut"
                                                                class="form-select-input__field form-select-input__field--simple"
                                                                data-validation="required"
                                                                disabled
                                                            >
                                                                <option
                                                                    th:each="option : ${postesList}"
                                                                    th:value="${option.id}"
                                                                    th:text="${option.label}"
                                                                    th:selected="(${option.id} == *{posteSelected})"
                                                                >
                                                                </option>
                                                            </select>
                                                            <span aria-hidden="true" tabindex="-1">
                                                                <span
                                                                    aria-hidden="true"
                                                                    class="icon icon--arrow-bottom form-select-input__arrow"
                                                                ></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="poste_defaut_description" class="form-input__footer"></div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <!---->
                <div class="interstitial__footer">
                    <button
                        type="button"
                        class="interstitial__button base-btn base-btn--button base-btn--default base-btn--light base-btn--center base-btn--transparent base-btn--bordered"
                        th:text="#{button.label.cancel}"
                    ></button>
                    <button
                        th:if="${#strings.isEmpty(idCommunicationATraiter)}"
                        type="button"
                        class="base-btn base-btn--button base-btn--default base-btn--center"
                        id="btn-create-dossier-choix-poste"
                        th:text="#{button.label.valider}"
                        onclick="setPosteAndCreateFolder()"
                    ></button>
                    <button
                        th:unless="${#strings.isEmpty(idCommunicationATraiter)}"
                        type="button"
                        class="base-btn base-btn--button base-btn--default base-btn--center"
                        id="btn-create-dossier-choix-poste"
                        th:text="#{button.label.valider}"
                        onclick="setPosteAndCreerDossierPourTraiter()"
                    ></button>
                </div>
            </div>
            <div tabindex="-1" class="interstitial-overlay__tabindex"></div>
        </div>
    </body>
</html>
