<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <div th:fragment="traitementPapier" id="traitement_content">
            <div th:if="${subtabs!=null}" class="tabulation">
                <div role="tablist" class="tabulation__header">
                    <button
                        th:each="onglet, status : ${subtabs.onglets}"
                        type="button"
                        role="tab"
                        class="tabulation__item js-tabulation base-btn base-btn--button base-btn--default base-btn--transparent dossier-onglet"
                        th:classappend="${onglet.isActif ? 'tabulation\_\_item--active' : ''}"
                        th:aria-selected="${onglet.isActif ? 'true' : 'false'}"
                        th:aria-controls="'sous_tab_content-'+${status.index}"
                        th:id="'d_ss_tab_link-'+${status.index}"
                        th:data-name="${onglet.id}"
                        th:attr="onclick=${onglet.script}"
                        th:tabindex="${!onglet.isActif ? '-1' : null}"
                        th:text="#{__${onglet.label}__}"
                        name="subtab"
                    ></button>
                </div>
                <div class="tabulation__body">
                    <div
                        th:each="onglet, status : ${subtabs.onglets}"
                        role="tabpanel"
                        tabindex="0"
                        class="tabulation__content"
                        th:id="'sous_tab_content-'+${status.index}"
                        th:aria-hidden="${onglet.isActif ? 'false' : 'true'}"
                        th:aria-labelledby="'d_ss_tab_link-'+${status.index}"
                        th:classappend="${onglet.isActif ? 'tabulation\_\_content--active' : ''}"
                    >
                        <th:block th:if="${onglet.isActif}">
                            <div th:replace="${onglet.fragmentFile} :: ${onglet.fragmentName}"></div>
                        </th:block>
                        <div
                            th:unless="${onglet.isActif}"
                            th:id="'d_ss_'+${onglet.id}+'_content'"
                            th:text="#{page.loading}"
                        >
                            Chargement
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
