<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <div class="leftmenu" th:fragment="leftMenuSuivi">
            <div class="accordion accordion--aside accordion--is-opened">
                <div class="accordion__header accordion__header--action accordion__header--aside">
                    <div
                        class="accordion__title-label js-toggle-zerog"
                        data-simulate="accordion_menu_suivi"
                        th:text="#{menu.suivi}"
                    ></div>
                    <button
                        type="button"
                        class="base-btn base-btn--button base-btn--default base-btn--icon-action-blue base-btn--center base-btn--transparent"
                        onclick="refreshTreesSuivi()"
                    >
                        <span aria-hidden="true" class="icon icon--refresh"></span>
                        <span class="sr-only" th:text="#{epg.sidebar.suivi.refresh}">Actualiser</span>
                    </button>
                    <button
                        type="button"
                        aria-controls="suivi_menu_content"
                        aria-expanded="true"
                        id="accordion_menu_suivi"
                        data-toggle="accordion__content"
                        data-icon-opened="substract-without-background"
                        data-icon-closed="add-without-background"
                        th:aria-label="#{menu.suivi}"
                        class="js-toggle accordion__toggle"
                    >
                        <span
                            aria-hidden="true"
                            class="icon icon--substract-without-background bubble-icon bubble-icon--neutral accordion__icon accordion__icon--aside"
                        ></span>
                    </button>
                </div>
                <div
                    aria-hidden="false"
                    id="accordion__content__suivi"
                    class="accordion__content accordion__content--aside accordion__content--is-opened accordion__content--has-background"
                >
                    <div class="m-a-4">
                        <nav aria-label="Navigation en arborescence" class="tree-navigation">
                            <ul class="suivi-leftbar__tree tree-navigation__container">
                                <ul class="tree-navigation__list tree-navigation__list--is-opened">
                                    <li
                                        class="tree-navigation__item tree-navigation__item--is-opened tree-navigation__item--has-toggler tree-navigation__item--lvl-1"
                                        th:each="corbeille : ${trees}"
                                        th:classappend="${corbeille.isOpen ? ' tree-navigation\_\_list--is-opened ' : ' tree-navigation\_\_list--is-closed '}"
                                        th:aria-hidden="${corbeille.isOpen ? 'false' : 'true'}"
                                    >
                                        <div class="tree-navigation__toggle-wrapper">
                                            <button
                                                th:aria-controls="'toggled-'+${corbeille.key}"
                                                aria-expanded="false"
                                                th:id="'toggler-'+${corbeille.key}"
                                                th:data-tree-reload-id="${corbeille.key}"
                                                data-toggle="tree-navigation__list"
                                                data-icon-opened="minus"
                                                data-icon-closed="plus"
                                                class="tree-navigation__toggle js-toggle uppercase"
                                                th:attrappend="onclick=|onClickOpenSuiviNode('${corbeille.key}', '${corbeille.completeKey}', 'toggled-${corbeille.key}')|"
                                            >
                                                <span
                                                    aria-hidden="true"
                                                    class="tree-navigation__icon tree-navigation__icon--toggler tree-navigation__icon--opened icon bubble-icon bubble-icon--squared bubble-icon--small"
                                                    th:classappend="${corbeille.isOpen ? 'icon--minus' : 'icon--plus'}"
                                                ></span>
                                                <span class="tree-navigation__text" th:text="#{${corbeille.label}}"
                                                    >Titre</span
                                                >
                                            </button>
                                        </div>
                                        <div
                                            th:id="${corbeille.key}"
                                            th:insert="fragments/leftblocks/suivi-arbre :: arbre(${corbeille.childs}, 2, ${corbeille.key}, ${corbeille.isOpen}, ${corbeille.key})"
                                        ></div>
                                    </li>
                                    <!--Tableaux dynamiques -->
                                    <li
                                        class="tree-navigation__item tree-navigation__item--is-opened tree-navigation__item--has-toggler tree-navigation__item--lvl-1 tree-navigation__list--is-closed"
                                    >
                                        <div
                                            th:replace="fragments/leftblocks/tableaux-dynamiques :: tableaux-dynamiques"
                                        ></div>
                                    </li>
                                    <!--Bloc Mes alertes -->
                                    <li
                                        class="tree-navigation__item tree-navigation__item--is-opened tree-navigation__item--has-toggler tree-navigation__item--lvl-1"
                                    >
                                        <div
                                            th:replace="fragments/leftblocks/suivi-alerte :: suivi-alerte(${alertes})"
                                        ></div>
                                    </li>
                                    <li
                                        th:each="menu, nb : ${leftMenuList}"
                                        class="tree-navigation__item tree-navigation__item--is-opened tree-navigation__item--has-toggler tree-navigation__item--lvl-1"
                                        th:if="${#arrays.length(menu.childs) > 0}"
                                    >
                                        <div class="tree-navigation__toggle-wrapper">
                                            <button
                                                th:aria-controls="'tree-navigation__toggled__'+${nb.count}"
                                                aria-expanded="true"
                                                th:id="'tree-navigation__toggler__'+${nb.count}"
                                                data-toggle="tree-navigation__list"
                                                data-icon-opened="minus"
                                                data-icon-closed="plus"
                                                class="tree-navigation__toggle js-toggle uppercase"
                                            >
                                                <span
                                                    aria-hidden="true"
                                                    class="tree-navigation__icon tree-navigation__icon--toggler tree-navigation__icon--opened icon icon--minus bubble-icon bubble-icon--squared bubble-icon--small"
                                                ></span>
                                                <span
                                                    class="tree-navigation__text"
                                                    th:text="#{__${menu.titleKey}__}"
                                                ></span>
                                            </button>
                                        </div>
                                        <ul
                                            th:id="'tree-navigation__toggled__'+${nb.count}"
                                            class="tree-navigation__list tree-navigation__list--is-opened tree-navigation__list--subtree"
                                        >
                                            <li
                                                th:each="child : ${menu.childs}"
                                                class="tree-navigation__item tree-navigation__item--subitem"
                                            >
                                                <a th:href="@{${child.url}}" class="tree-navigation__link link">
                                                    <span
                                                        class="tree-navigation__text"
                                                        th:text="#{__${child.titleKey}__}"
                                                    ></span>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>

                                    <li
                                        class="tree-navigation__item tree-navigation__item--lvl-1"
                                        th:if="${gestionListeAction}"
                                    >
                                        <a
                                            th:title="#{__${gestionListeAction.label}__}"
                                            th:href="@{__${gestionListeAction.link}__}"
                                            class="tree-navigation__link tree-navigation__link--has-icon link link--no-line"
                                        >
                                            <span
                                                aria-hidden="true"
                                                class="icon link__icon link__icon--prepend link__icon--large icon--folder"
                                            ></span>
                                            <span
                                                class="tree-navigation__text"
                                                th:text="#{__${gestionListeAction.label}__}"
                                                >Gestion des listes</span
                                            >
                                        </a>
                                    </li>
                                </ul>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
