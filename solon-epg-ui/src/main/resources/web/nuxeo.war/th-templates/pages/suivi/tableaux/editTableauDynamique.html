<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    th:replace="~{layouts/layout :: layout (template=~{::main},templateClass='', description='page d\'édition ou de création d\'un tableau dynamique', 
    title=${tableauForm.id == null} ? #{tableau.dynamique.creer.label} : #{tableau.dynamique.modifier.label(${tableauForm.libelle})})}"
>
    <main role="main" id="main_content" class="page-layout__content">
        <th:block
            th:replace="fragments/components/formEditTdButtons ::formEditTdButtons(${tableauForm.id}, 'saveTableauDynamique()')"
        ></th:block>
        <h1
            class="base-title base-title--lvl-1"
            th:if="${tableauForm.id == null}"
            th:text="#{tableau.dynamique.creer.label}"
        >
            Ajouter un tableau dynamique
        </h1>
        <h1
            class="base-title base-title--lvl-1"
            th:unless="${tableauForm.id == null}"
            th:text="#{tableau.dynamique.modifier.label(${tableauForm.libelle})}"
        >
            Modifier le tableau dynamique XXX
        </h1>
        <input type="hidden" id="urlPreviousPage" name="urlPreviousPage" th:value="@{${urlPreviousPage}}" />
        <form id="td-form">
            <input type="hidden" id="id" name="id" th:value="${tableauForm.id}" />
            <input type="hidden" id="type" name="type" th:value="${type}" />
            <div class="grid__row m-t-6">
                <div class="grid__col grid__col--middle">
                    <div
                        th:replace="fragments/components/formblocks/simple-input :: simpleInput(#{tableau.dynamique.libelle}, true, null, 'libelle', 'libelle', ${tableauForm.libelle}, false)"
                    ></div>
                </div>
            </div>
            <th:block th:if="${visibiliteDestinataires}">
                <div class="grid__row m-t-6">
                    <div class="grid__col grid__col--middle">
                        <th:block
                            th:replace="fragments/components/organigrammeSelectAutocomplete ::organigrammeSelectAutocomplete(
					            'tableau.dynamique.destinataires',
					            false,
					            'destinataires',
					            'destinataires',
                                'PST,MIN,UST,DIR', 
					           '', 
					            false,
					            true,
					            ${tableauForm.mapDestinataires},
					            false)"
                        ></th:block>
                    </div>
                </div>
            </th:block>
        </form>
        <th:block
            th:replace="fragments/components/formEditTdButtons ::formEditTdButtons(${tableauForm.id}, 'saveTableauDynamique()')"
        ></th:block>
    </main>
</html>
